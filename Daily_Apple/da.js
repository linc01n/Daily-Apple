// Generated by CoffeeScript 1.4.0
(function() {
  var Article, root;

  Article = (function() {

    function Article() {}

    Article.prototype.set_title = function(title) {
      this.title = title;
    };

    Article.prototype.set_content = function(content) {
      this.content = content;
    };

    Article.prototype.set_date = function(date) {
      this.date = date;
    };

    Article.prototype.set_section = function(section) {
      this.section = section;
    };

    Article.prototype.set_view_count = function(view_count) {
      this.view_count = view_count;
    };

    Article.prototype.parse = function(html) {
      var page, raw_content;
      page = $(html);
      this.set_title(page.find("#articleContent h1").text());
      this.set_view_count(page.find("#articleContent .view").text());
      raw_content = page.find("#masterContent .ArticleContent_Inner");
      return this.set_content(_.chain(raw_content).map(function(paragraph) {
        return $(paragraph).children();
      }).map(function(child) {
        return $(child).removeAttr("class").parent().html(function(idx, html) {
          return html.replace(/^\s+|\s+$/g, "").replace(/>\s+</g, "><");
        }).html();
      }).reduce(function(memo, obj) {
        return memo + obj;
      }).value());
    };

    return Article;

  })();

  root = typeof exports !== "undefined" && exports !== null ? exports : this;

  root.Article = Article;

}).call(this);
